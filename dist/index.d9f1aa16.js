const e=config.MY_API_TOKEN,t=document.querySelector("#search-button"),n=document.querySelector("#results"),a=document.querySelector(".grid");function i(e){if(e){const e=document.createElement("div");e.innerHTML="<hr/><hr/><hr/><hr/>",e.classList.add("load"),a.appendChild(e)}else{document.querySelector(".load").remove()}}async function r(e){if(!e.ok)throw new Error(`Status Code Error: ${e.status}`);return await e.json()}function o(e){const t=`https://image.tmdb.org/t/p/w500/${e.poster_path}`,a=e.id;n.insertAdjacentHTML("afterbegin",`<div class="card img-fluid col-xs-1 col-m-3 d-flex justify-content-center" data-popularity="${e.popularity}">\n\t        <div id="${e.id}" class="card-front">\n\t            <img id="${e.id}" class="movie-art img-fluid" src="${t}">\n\t        </div>\n\t    </div>`);document.getElementById(a).addEventListener("click",(e=>{!function(e){const t=document.getElementById(e.target.id),n=document.getElementById(`card${e.target.id}`);n.style.display="block"==n.style.display?"none":"block",t.after(n)}(e)}))}function c(e,t){let n,a;"movie"===t&&(n="title",a="release_date"),"show"===t&&(n="name",a="first_air_date");const i=document.createElement("div");i.innerHTML=`<div class="card-info col-xs-1 col-m-3" id="card${e.id}">\n        <div class="card-format p-4">\n            <div class="movie-title mb-3"><b>Title: </b><br>${e[n]}</div>\n            <div class="release-date mb-3"><b>Release Date: </b><br>${e[a]}</div>\n            <div class="movie-info mb-3"><b>Description: </b><br>${e.overview}</div>\n            <div class="stream-on" id="stream${e.id}">\n                <b>Watch Here</b>\n                <ul class="subscription"><b>Steam On:</b></ul>\n                <ul class="rent"><b>Rent On:</b></ul>\n                <ul class="buy"><b>Buy On:</b></ul>\n            </div>\n        </div>\n    </div>`;document.getElementById(e.id).after(i)}async function l(t,n="movie"){try{let a=`https://api.themoviedb.org/3/movie/${t}/watch/providers?api_key=${e}`;"show"===n&&(a=`https://api.themoviedb.org/3/tv/${t}/watch/providers?api_key=${e}`);const i=await fetch(a);return await r(i)}catch(e){console.log(e)}}function s(e,t){const n=document.querySelector(`#stream${t}`),a=document.querySelector(`#stream${t} .subscription`),i=document.querySelector(`#stream${t} .rent`),r=document.querySelector(`#stream${t} .buy`);if(e.results.CA){if(e.results.CA.flatrate)e.results.CA.flatrate.forEach((e=>{let t=document.createElement("li");a.appendChild(t).innerHTML=e.provider_name}));else{let e=document.createElement("li");a.appendChild(e).innerHTML="Not available in Canada."}if(e.results.CA.rent)e.results.CA.rent.forEach((e=>{let t=document.createElement("li");i.appendChild(t).innerHTML=e.provider_name}));else{let e=document.createElement("li");i.appendChild(e).innerHTML="Not available in Canada."}if(e.results.CA.buy)e.results.CA.buy.forEach((e=>{let t=document.createElement("li");r.appendChild(t).innerHTML=e.provider_name}));else{let e=document.createElement("li");r.appendChild(e).innerHTML="Not available in Canada."}}else n.innerHTML="<b>Not available to stream, rent, or buy in Canada.</b>"}t.addEventListener("click",(t=>{t.preventDefault(),async function(){try{i(!0),n.innerHTML="";const d=document.querySelector(".search-text").value,u=await async function(t){try{const n=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${e}&query=${encodeURIComponent(t)}`);return await r(n)}catch(e){console.log(e)}}(d);!async function(e){try{e.results.filter((e=>e.id&&e.poster_path)).forEach((async e=>{o(e),c(e,"movie");s(await async function(e){return await l(e)}(e.id),e.id)}))}catch(e){console.log(e)}}(u);const m=await async function(t){try{const n=await fetch(`https://api.themoviedb.org/3/search/tv?api_key=${e}&query=${encodeURIComponent(t)}`);return await r(n)}catch(e){console.log(e)}}(d);!async function(e){try{e.results.filter((e=>e.id&&e.poster_path)).forEach((async e=>{o(e),c(e,"show");s(await async function(e){return await l(e,"show")}(e.id),e.id)}))}catch(e){console.log(e)}}(m),t=document.querySelectorAll(".card"),Array.from(t).sort(((e,t)=>t.dataset.popularity-e.dataset.popularity)).forEach((e=>e.parentNode.appendChild(e)))}catch(e){console.log(e)}finally{i(!1),a.style.display="flex",n.style.display="flex",window.scroll({top:n.getBoundingClientRect().top,behavior:"smooth"})}var t}()}));
//# sourceMappingURL=index.d9f1aa16.js.map
